<%-include('../../partials/header.ejs')%>
<body>
    <%-include('../../partials/navbar.ejs')%>

 <div class="container">
   <hr>
   <h2>Categorias</h2>
   <a href="/admin/categories/new" class="btn btn-success">Cadastrar categoria</a>
   <hr>
   <table class="table table-bordered">
       <thead>
           <tr>
               <th>Id</th>
               <th>Título</th>
               <th>Slug</th>
               <th>Ações</th>
           </tr>
       </thead>
       <tbody>
           <% categories.forEach(category =>{ %>
            <tr>
                <th><%=category.id%></th>
                <th><%=category.title%></th>
                <th><%=category.slug%></th>
                <th id="buttonEditCategories">
                      <a href='/admin/categories/edit/<%=category.id%>' class="btn btn-warning">Editar</a>
                    <form method='POST' action="/categories/delete" style="display:inline" onsubmit='confirmarDelecao(event, this)'>
                        <input type="hidden" name="id" value='<%=category.id%>' />
                        <button class="btn btn-danger">Deletar</button>
                    </form>
                </th>
             </tr>
           <% }) %>
       </tbody>
   </table>  
</div>
   

</body>
<script>
    function confirmarDelecao(event, form){
        event.preventDefault()
        let decision = confirm("você quer deletar esta categoria?")
        if (decision){
            form.submit()
        }
    }
</script>
<%-include('../../partials/footer.ejs')%>